{"version":3,"sources":["webpack:///./node_modules/@w11k/ngx-componentdestroyed/dist/es2015/index.js","webpack:///./src/app/layout/marker-edit/marker-edit.component.html","webpack:///./src/app/layout/marker-edit/marker-edit.component.less","webpack:///./src/app/layout/marker-edit/marker-edit.component.ts","webpack:///./src/app/layout/marker-edit/service/marker-edit.service.ts","webpack:///./src/app/layout/service/map.service.ts","webpack:///./src/app/model/location-type.enum.ts","webpack:///./src/app/store/users/index.ts","webpack:///./src/app/store/users/state/index.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqC;AACM;AACpC;AACP;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAa;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP,8BAA8B,oBAAoB,gEAAS,iCAAiC;AAC5F;;;;;;;;;;;;AClBA,80GAA80G,uHAAuH,iRAAiR,iBAAiB,+K;;;;;;;;;;;ACAvuH,uCAAuC,iBAAiB,gBAAgB,kBAAkB,mBAAmB,GAAG,WAAW,iBAAiB,gBAAgB,GAAG,qCAAqC,kBAAkB,wBAAwB,GAAG,oEAAoE,qBAAqB,GAAG,kDAAkD,qBAAqB,GAAG,oEAAoE,iBAAiB,sBAAsB,GAAG,yEAAyE,kBAAkB,sBAAsB,gBAAgB,GAAG,iDAAiD,kBAAkB,gBAAgB,sBAAsB,GAAG,+CAA+C,+pF;;;;;;;;;;;;;;;;;;;;;;;;ACAhrB;AAClD;AACF;AAET;AACQ;AAChB;AACG;AACmB;AASrE;IAYE,6BAAoB,SAA4C,EAC3B,IAA0D,EAC3E,EAAe,EAChB,MAAkB,EACjB,QAAiB,EACjB,KAAY,EACZ,aAA4B,EAC5B,MAAc;QAPd,cAAS,GAAT,SAAS,CAAmC;QAE5C,OAAE,GAAF,EAAE,CAAa;QAChB,WAAM,GAAN,MAAM,CAAY;QACjB,aAAQ,GAAR,QAAQ,CAAS;QACjB,UAAK,GAAL,KAAK,CAAO;QACZ,kBAAa,GAAb,aAAa,CAAe;QAC5B,WAAM,GAAN,MAAM,CAAQ;QAChC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QAClC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAC1B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;QACzC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC;IAC7C,CAAC;IAED,sCAAQ,GAAR;QAAA,iBAIC;QAHC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,sEAAkB,CAAC,8EAA2C,CAAC,EAAE,4FAAuB,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC;YAC3H,KAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC;IAGD,wCAAU,GAAV;QACE,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;YACpC,QAAQ,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,yDAAU,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC;YACxE,SAAS,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,yDAAU,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC;YAC1E,IAAI,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;YAC5B,KAAK,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC;YAC9B,OAAO,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;SACnC,CAAC,CAAC;IACL,CAAC;IAED,gDAAkB,GAAlB;QAAA,iBAoBC;QAnBC,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAM,YAAY,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,gBAAgB,CAAC,aAAa,EAAE;YAC5F,KAAK,EAAE,CAAC,SAAS,CAAC;SACnB,CAAC,CAAC;QAGH,YAAY,CAAC,WAAW,CAAC,eAAe,EAAE;YACxC,KAAI,CAAC,MAAM,CAAC,GAAG,CAAC;gBACd,IAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,YAAY,CAAC,QAAQ,EAAE,CAAC;gBACvE,IAAI,KAAK,CAAC,QAAQ,KAAK,SAAS,IAAI,KAAK,CAAC,QAAQ,KAAK,IAAI,EAAE;oBAC3D,OAAO;iBACR;gBAED,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;gBAC9C,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;gBAC/C,KAAI,CAAC,IAAI,GAAG,EAAE,CAAC;YAEjB,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAED,mDAAqB,GAArB;QACE,IAAI,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE;YACjC,OAAO;SACR;QACD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,uEAAoC,CAAC,EAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,CAAC,UAAU,EAAC,CAAC,CAAC,CAAC;IAClH,CAAC;IAED,2CAAa,GAAb,UAAc,MAAW;QACvB,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC;QAClC,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC;QACnC,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QACzC,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;IAC7C,CAAC;IAGD,yCAAW,GAAX;IACA,CAAC;IAvED;QADC,+DAAS,CAAC,QAAQ,CAAC;wEACK,wDAAU;iEAAC;IAVzB,mBAAmB;QAL/B,+DAAS,CAAC;YACT,QAAQ,EAAE,iBAAiB;YAC3B,4HAA2C;;SAE5C,CAAC;QAca,6GAAM,CAAC,iEAAe,CAAC;+EADL,8DAAY,UAEnB,0DAAW;YACR,+DAAU;YACP,mDAAO;YACV,iDAAK;YACG,uDAAa;YACpB,oDAAM;OAnBvB,mBAAmB,CAmF/B;IAAD,0BAAC;CAAA;AAnF+B;;;;;;;;;;;;;;;;;;;;ACjBS;AACiB;AACG;AAI7D;IAEE,iCAAoB,MAAiB;QAAjB,WAAM,GAAN,MAAM,CAAW;IACrC,CAAC;IAED,sDAAoB,GAApB,UAAqB,IAAI;QACvB,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,0EAAmB,EAAE;YAC3C,KAAK,EAAE,OAAO;YACd,QAAQ,EAAE,OAAO;YACjB,MAAM,EAAE,OAAO;YACf,SAAS,EAAE,OAAO;YAClB,IAAI;SACL,CAAC,CAAC;IAEL,CAAC;IAdU,uBAAuB;QADnC,gEAAU,EAAE;+EAGiB,2DAAS;OAF1B,uBAAuB,CAenC;IAAD,8BAAC;CAAA;AAfmC;;;;;;;;;;;;;;;;;;;ACNK;AAGmB;AAO5D;IAEE;IACA,CAAC;IAED,0CAAqB,GAArB,UAAsB,GAAyB,EAAE,GAAW,EAAE,GAAW;QACvE,IAAM,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAChD,OAAO,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IAC3B,CAAC;IAGD,mCAAc,GAAd,UAAe,GAAkB,EAAE,QAAyB,EAAE,SAA2B,EAAE,KAAkB,EAAE,IAAiB,EACjH,OAAwE;QADxE,gCAAkB;QAAE,4CAAyB;QAAE,+CAA2B;QAAE,kCAAkB;QAAE,gCAAiB;QACjH,0FAAwE;QACrF,OAAO;YACL,GAAG;YACH,QAAQ;YACR,SAAS;YACT,KAAK;YACL,IAAI,EAAE,sEAAY,CAAC,IAAI;YACvB,OAAO;YACP,IAAI;SACY,CAAC;IAErB,CAAC;IAED,wCAAmB,GAAnB,UAAoB,QAAuB,EAAE,QAAyB;QACpE,IAAM,KAAK,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC;QACjC,IAAI,KAAK,EAAE;YACT,OAAO,QAAQ,CAAC,QAAQ,CAAC,CAAC;SAC3B;QACD,OAAO,GAAG,CAAC;IACb,CAAC;IA/BU,UAAU;QAHtB,gEAAU,CAAC;YACV,UAAU,EAAE,MAAM;SACnB,CAAC;;OACW,UAAU,CAgCtB;IAAD,iBAAC;CAAA;AAhCsB;;;;;;;;;;;;;ACVvB;AAAA;AAAA,IAAY,YAGX;AAHD,WAAY,YAAY;IACtB,6DAAe;IACf,+CAAQ;AACV,CAAC,EAHW,YAAY,KAAZ,YAAY,QAGvB;;;;;;;;;;;;;ACHD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgC;AACF;;;;;;;;;;;;;ACD9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8B","file":"default~dashboard-dashboard-module~layout-layout-module.js","sourcesContent":["import { ReplaySubject } from \"rxjs\";\nimport { takeUntil } from \"rxjs/operators\";\nexport function componentDestroyed(component) {\n    var modifiedComponent = component;\n    if (modifiedComponent.__componentDestroyed$) {\n        return modifiedComponent.__componentDestroyed$;\n    }\n    var oldNgOnDestroy = component.ngOnDestroy;\n    var stop$ = new ReplaySubject();\n    modifiedComponent.ngOnDestroy = function () {\n        oldNgOnDestroy && oldNgOnDestroy.apply(component);\n        stop$.next(true);\n        stop$.complete();\n    };\n    return modifiedComponent.__componentDestroyed$ = stop$.asObservable();\n}\nexport function untilComponentDestroyed(component) {\n    return function (source) { return source.pipe(takeUntil(componentDestroyed(component))); };\n}\n","module.exports = \"<form novalidate>\\n  <button [mat-dialog-close]=\\\"true\\\" class=\\\"dialog-close\\\" mat-button>Ã—</button>\\n  <div class=\\\"marker-edit-container\\\">\\n    <div class=\\\"top-title\\\">\\n      <h2 mat-dialog-title>\\n      </h2>\\n\\n    </div>\\n    <div class=\\\"marker-edit-container-main\\\">\\n      <div mat-dialog-content>\\n        <div class=\\\"marker-form\\\">\\n          <mat-card class=\\\"marker-form-card\\\">\\n            <mat-card-header>\\n            </mat-card-header>\\n\\n            <mat-card-content>\\n\\n              <form (ngSubmit)=\\\"onSubmitMarkerDetails()\\\" [formGroup]=\\\"markerDetailForm\\\">\\n                <mat-form-field class=\\\"full-width\\\">\\n                  <input [(ngModel)]=\\\"latitude\\\" formControlName=\\\"latitude\\\" matInput placeholder=\\\"latitude\\\" required>\\n                  <mat-error\\n                    *ngIf=\\\"!markerDetailForm.controls['latitude'].valid && markerDetailForm.controls['latitude'].touched\\\">\\n                    must be flout number\\n                  </mat-error>\\n                </mat-form-field>\\n\\n                <mat-form-field class=\\\"full-width\\\">\\n                  <input [(ngModel)]=\\\"longitude\\\" formControlName=\\\"longitude\\\" matInput placeholder=\\\"longitude\\\" required>\\n                  <mat-error\\n                    *ngIf=\\\"!markerDetailForm.controls['longitude'].valid && markerDetailForm.controls['longitude'].touched\\\">\\n                    must be flout number\\n                  </mat-error>\\n                </mat-form-field>\\n\\n\\n                <mat-form-field class=\\\"full-width\\\">\\n                  <input [(ngModel)]=\\\"markerData.info\\\" formControlName=\\\"info\\\" matInput placeholder=\\\"windows info\\\">\\n                </mat-form-field>\\n\\n\\n                <mat-form-field class=\\\"full-width\\\">\\n                  <input [(ngModel)]=\\\"markerData.label\\\" formControlName=\\\"label\\\" matInput placeholder=\\\"label\\\">\\n                </mat-form-field>\\n\\n                <mat-form-field class=\\\"full-width\\\">\\n                  <input [(ngModel)]=\\\"markerData.iconUrl\\\" formControlName=\\\"iconUrl\\\" matInput placeholder=\\\"iconUrl\\\">\\n                  <mat-error\\n                    *ngIf=\\\"!markerDetailForm.controls['iconUrl'].valid && markerDetailForm.controls['iconUrl'].touched\\\">\\n                  </mat-error>\\n\\n                </mat-form-field>\\n                <button [disabled]=\\\"!markerDetailForm.valid\\\" class=\\\"submit-btn\\\" color=\\\"primary\\\" mat-raised-button\\n                        type=\\\"submit\\\">\\n                  Submit\\n                </button>\\n              </form>\\n\\n            </mat-card-content>\\n          </mat-card>\\n\\n\\n        </div>\\n        <div class=\\\"marker-map\\\">\\n\\n          <mat-card>\\n            <div class=\\\"form-group\\\">\\n              <mat-form-field class=\\\"form-search-address-container\\\">\\n                <input c #search matInput (keydown.enter)=\\\"$event.preventDefault()\\\" autocapitalize=\\\"off\\\"\\n                       autocorrect=\\\"off\\\" placeholder=\\\"Search Location\\\" spellcheck=\\\"off\\\"\\n                       type=\\\"text\\\" type=\\\"text\\\">\\n              </mat-form-field>\\n            </div>\\n\\n          </mat-card>\\n          <agm-map [latitude]=\\\"latitude\\\" [longitude]=\\\"longitude\\\" [zoom]=\\\"6\\\">\\n            <agm-marker (dragEnd)=\\\"markerDragEnd($event)\\\" [animation]=\\\"1\\\" [latitude]=\\\"latitude\\\" [longitude]=\\\"longitude\\\"\\n                        [label]=\\\"{fontSize: '16px', text:mapSrv.getLocationProperty(markerData,'label'), id:mapSrv.getLocationProperty(markerData,'_id')}\\\"\\n                        [iconUrl]=\\\"markerData.iconUrl\\\"\\n                        [markerDraggable]=\\\"true\\\">\\n              <agm-info-window [disableAutoPan]=\\\"false\\\" [isOpen]=\\\"true\\\">\\n                <div class=\\\"gmap-info-window-container\\\">\\n                  {{markerData.info}}\\n                </div>\\n              </agm-info-window>\\n            </agm-marker>\\n          </agm-map>\\n        </div>\\n      </div>\\n\\n    </div>\\n\\n  </div>\\n</form>\\n\"","module.exports = \".mat-dialog-content {\\n  height: 100%;\\n  width: 100%;\\n  display: flex;\\n  flex-flow: row;\\n}\\nagm-map {\\n  height: 90vh;\\n  width: 100%;\\n}\\n:host .marker-edit-container-main {\\n  display: flex;\\n  flex-direction: row;\\n}\\n:host .marker-edit-container-main .form-search-address-container {\\n  min-width: 300px;\\n}\\n:host .marker-edit-container-main .marker-form {\\n  min-width: 300px;\\n}\\n:host .marker-edit-container-main .marker-form .marker-form-card {\\n  height: 100%;\\n  margin-right: 9px;\\n}\\n:host .marker-edit-container-main .marker-form .mat-card-content form {\\n  display: flex;\\n  flex-flow: column;\\n  width: 100%;\\n}\\n:host .marker-edit-container-main .marker-map {\\n  display: flex;\\n  width: 100%;\\n  flex-flow: column;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hc2FmbGV2eS9wcm9qZWN0L3dpbnRlZ29fcHJvamVjdC93aW50ZWdvLW1hcC1mcm9udC9zcmMvYXBwL2xheW91dC9tYXJrZXItZWRpdC9tYXJrZXItZWRpdC5jb21wb25lbnQubGVzcyIsInNyYy9hcHAvbGF5b3V0L21hcmtlci1lZGl0L21hcmtlci1lZGl0LmNvbXBvbmVudC5sZXNzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsWUFBQTtFQUNBLFdBQUE7RUFDQSxhQUFBO0VBQ0EsY0FBQTtBQ0NGO0FER0E7RUFDRSxZQUFBO0VBQ0EsV0FBQTtBQ0RGO0FESUE7RUFHSSxhQUFBO0VBQ0EsbUJBQUE7QUNKSjtBREFBO0VBT00sZ0JBQUE7QUNKTjtBREhBO0VBV00sZ0JBQUE7QUNMTjtBRE9NO0VBQ0UsWUFBQTtFQUNBLGlCQUFBO0FDTFI7QURXUTtFQUNFLGFBQUE7RUFDQSxpQkFBQTtFQUNBLFdBQUE7QUNUVjtBRGZBO0VBK0JNLGFBQUE7RUFDQSxXQUFBO0VBQ0EsaUJBQUE7QUNiTiIsImZpbGUiOiJzcmMvYXBwL2xheW91dC9tYXJrZXItZWRpdC9tYXJrZXItZWRpdC5jb21wb25lbnQubGVzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYXQtZGlhbG9nLWNvbnRlbnQge1xuICBoZWlnaHQ6IDEwMCU7XG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWZsb3c6IHJvdztcbn1cblxuXG5hZ20tbWFwIHtcbiAgaGVpZ2h0OiA5MHZoO1xuICB3aWR0aDogMTAwJTtcbn1cblxuOmhvc3Qge1xuXG4gIC5tYXJrZXItZWRpdC1jb250YWluZXItbWFpbiB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuXG4gICAgLmZvcm0tc2VhcmNoLWFkZHJlc3MtY29udGFpbmVyIHtcbiAgICAgIG1pbi13aWR0aDogMzAwcHg7XG4gICAgfVxuXG4gICAgLm1hcmtlci1mb3JtIHtcbiAgICAgIG1pbi13aWR0aDogMzAwcHg7XG5cbiAgICAgICYgLm1hcmtlci1mb3JtLWNhcmQge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIG1hcmdpbi1yaWdodDogOXB4O1xuICAgICAgfVxuXG4gICAgICAubWF0LWNhcmQtY29udGVudCB7XG5cblxuICAgICAgICAmIGZvcm0ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1mbG93OiBjb2x1bW47XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIH1cblxuICAgICAgfVxuICAgIH1cblxuICAgIC5tYXJrZXItbWFwIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGZsZXgtZmxvdzogY29sdW1uO1xuICAgIH1cbiAgfVxuXG59XG4iLCIubWF0LWRpYWxvZy1jb250ZW50IHtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1mbG93OiByb3c7XG59XG5hZ20tbWFwIHtcbiAgaGVpZ2h0OiA5MHZoO1xuICB3aWR0aDogMTAwJTtcbn1cbjpob3N0IC5tYXJrZXItZWRpdC1jb250YWluZXItbWFpbiB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XG59XG46aG9zdCAubWFya2VyLWVkaXQtY29udGFpbmVyLW1haW4gLmZvcm0tc2VhcmNoLWFkZHJlc3MtY29udGFpbmVyIHtcbiAgbWluLXdpZHRoOiAzMDBweDtcbn1cbjpob3N0IC5tYXJrZXItZWRpdC1jb250YWluZXItbWFpbiAubWFya2VyLWZvcm0ge1xuICBtaW4td2lkdGg6IDMwMHB4O1xufVxuOmhvc3QgLm1hcmtlci1lZGl0LWNvbnRhaW5lci1tYWluIC5tYXJrZXItZm9ybSAubWFya2VyLWZvcm0tY2FyZCB7XG4gIGhlaWdodDogMTAwJTtcbiAgbWFyZ2luLXJpZ2h0OiA5cHg7XG59XG46aG9zdCAubWFya2VyLWVkaXQtY29udGFpbmVyLW1haW4gLm1hcmtlci1mb3JtIC5tYXQtY2FyZC1jb250ZW50IGZvcm0ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWZsb3c6IGNvbHVtbjtcbiAgd2lkdGg6IDEwMCU7XG59XG46aG9zdCAubWFya2VyLWVkaXQtY29udGFpbmVyLW1haW4gLm1hcmtlci1tYXAge1xuICBkaXNwbGF5OiBmbGV4O1xuICB3aWR0aDogMTAwJTtcbiAgZmxleC1mbG93OiBjb2x1bW47XG59XG4iXX0= */\"","import {AfterContentInit, Component, ElementRef, Inject, NgZone, OnDestroy, OnInit, ViewChild} from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material';\nimport {LocationModel} from '../../model/location.model';\nimport {AgmInfoWindow, MapsAPILoader} from '@agm/core';\nimport {Actions, ofActionSuccessful, Store} from '@ngxs/store';\nimport * as fromUsers from '../../store/users';\nimport {MapService} from '../service/map.service';\nimport {untilComponentDestroyed} from '@w11k/ngx-componentdestroyed';\n\ndeclare var google;\n\n@Component({\n  selector: 'app-marker-edit',\n  templateUrl: './marker-edit.component.html',\n  styleUrls: ['./marker-edit.component.less']\n})\nexport class MarkerEditComponent implements OnInit, AfterContentInit, OnDestroy {\n\n  userId: string | null;\n  markerDetailForm: FormGroup;\n  latitude: number;\n  longitude: number;\n  zoom: number;\n  address: string;\n  markerData: LocationModel;\n  @ViewChild('search')\n  public searchElementRef: ElementRef;\n\n  constructor(private dialogRef: MatDialogRef<MarkerEditComponent>,\n              @Inject(MAT_DIALOG_DATA) data: { markerData: LocationModel, userId: string | null },\n              private fb: FormBuilder,\n              public mapSrv: MapService,\n              private actions$: Actions,\n              private store: Store,\n              private mapsAPILoader: MapsAPILoader,\n              private ngZone: NgZone) {\n    this.markerData = data.markerData;\n    this.userId = data.userId;\n    this.latitude = this.markerData.latitude;\n    this.longitude = this.markerData.longitude;\n  }\n\n  ngOnInit() {\n    this.actions$.pipe(ofActionSuccessful(fromUsers.UserInsertOrUpdateLocationSuccess), untilComponentDestroyed(this)).subscribe(() => {\n      this.dialogRef.close();\n    });\n  }\n\n\n  createForm() {\n    this.markerDetailForm = this.fb.group({\n      latitude: [this.latitude, Validators.pattern('[+-]?([0-9]*[.])?[0-9]+')],\n      longitude: [this.longitude, Validators.pattern('[+-]?([0-9]*[.])?[0-9]+')],\n      info: [this.markerData.info],\n      label: [this.markerData.label],\n      iconUrl: [this.markerData.iconUrl]\n    });\n  }\n\n  ngAfterContentInit(): void {\n    this.createForm();\n    const autocomplete = new google.maps.places.Autocomplete(this.searchElementRef.nativeElement, {\n      types: ['address']\n    });\n\n\n    autocomplete.addListener('place_changed', () => {\n      this.ngZone.run(() => {\n        const place = google.maps.places.PlaceResult = autocomplete.getPlace();\n        if (place.geometry === undefined || place.geometry === null) {\n          return;\n        }\n\n        this.latitude = place.geometry.location.lat();\n        this.longitude = place.geometry.location.lng();\n        this.zoom = 12;\n\n      });\n    });\n  }\n\n  onSubmitMarkerDetails() {\n    if (this.markerDetailForm.invalid) {\n      return;\n    }\n    this.store.dispatch(new fromUsers.UserInsertOrUpdateLocation({userId: this.userId, location: this.markerData}));\n  }\n\n  markerDragEnd($event: any) {\n    this.latitude = $event.coords.lat;\n    this.longitude = $event.coords.lng;\n    this.markerData.latitude = this.latitude;\n    this.markerData.longitude = this.longitude;\n  }\n\n\n  ngOnDestroy(): void {\n  }\n\n}\n","import {Injectable} from '@angular/core';\nimport {MatDialog, MatDialogRef} from '@angular/material';\nimport {MarkerEditComponent} from '../marker-edit.component';\n\n\n@Injectable()\nexport class MarkerEditDialogService {\n\n  constructor(private dialog: MatDialog) {\n  }\n\n  openMarkerEditDialog(data): MatDialogRef<any, any> {\n    return this.dialog.open(MarkerEditComponent, {\n      width: '100vw',\n      maxWidth: '100vw',\n      height: '100vh',\n      maxHeight: '100vh',\n      data\n    });\n\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {GoogleMapsAPIWrapper} from '@agm/core';\nimport {LocationModel} from '../../model/location.model';\nimport {LocationType} from '../../model/location-type.enum';\n\ndeclare var google;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MapService {\n\n  constructor() {\n  }\n\n  centerMapAroundMarker(map: GoogleMapsAPIWrapper, lat: number, lon: number): Promise<void> {\n    const latLng = new google.maps.LatLng(lat, lon);\n    return map.panTo(latLng);\n  }\n\n\n  createLocation(_id: string = null, latitude: number = 32.816, longitude: number = 34.9821, label: string = '', info: string = '',\n                 iconUrl: string = 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'): LocationModel {\n    return {\n      _id,\n      latitude,\n      longitude,\n      label,\n      type: LocationType.User,\n      iconUrl,\n      info,\n    } as LocationModel;\n\n  }\n\n  getLocationProperty(location: LocationModel, property: string | number) {\n    const value = location[property];\n    if (value) {\n      return location[property];\n    }\n    return ' ';\n  }\n}\n","export enum LocationType {\n  Interceptor = 1,\n  User = 2,\n}\n","export * from './actions/index';\nexport * from './state/index';\n","export * from './users.state';\n"],"sourceRoot":""}